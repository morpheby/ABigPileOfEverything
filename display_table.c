#include <stdio.h>
#include <stdint.h>

const uint8_t _segMap[256] = {
    /*  0     1     2     3     4     5     6     7     8     9     A     B     C     D     E     F  */
       0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 0
       0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 1
       0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x20, 0x00, // 2
       0xDB, 0x82, 0x9D, 0x9E, 0xC6, 0x5E, 0x5F, 0x8A, 0xDF, 0xDE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 3
       0x00, 0xCF, 0x57, 0x59, 0x97, 0x5D, 0x4D, 0x5B, 0x47, 0x41, 0x92, 0xC7, 0x51, 0xCB, 0x07, 0x17, // 4
       0xCD, 0xCE, 0x05, 0x5E, 0x55, 0xD3, 0x13, 0xD7, 0xC3, 0xD6, 0x9D, 0x00, 0x00, 0x00, 0x00, 0x10, // 5
       0x00, 0xCF, 0x57, 0x59, 0x97, 0x5D, 0x4D, 0x5B, 0x47, 0x41, 0x92, 0xC7, 0x51, 0xCB, 0x07, 0x17, // 6
       0xCD, 0xCE, 0x05, 0x5E, 0x55, 0x13, 0xD3, 0xD7, 0xC3, 0xD6, 0x9D, 0x00, 0x00, 0x00, 0x00, 0x00, // 7
         /* All ASCII chars higher than 0x80 are substituted by equal chars from 0x00-0x7F plus dot */
       0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 8
       0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 9
       0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x24, 0x20, 0x00, // A
       0xFB, 0xA2, 0xBD, 0xBE, 0xE6, 0x7E, 0x7F, 0xAA, 0xFF, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // B
       0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // C
       0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // D
       0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // E
       0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 // F
    /*  0     1     2     3     4     5     6     7     8     9     A     B     C     D     E     F  */
};

/******************************************************************************/
/*                      bit 3
 *                 ==============
 *               //            //
 *              //            //
 *        bit 6//            //bit 7
 *            //            //
 *           //    bit 2   //
 *           ==============
 *         //            //
 *        //            //
 *  bit 0//            //bit 1
 *      //            //
 *     //   bit 4    //
 *     ==============
 *   O                O
 *  unused           bit 5
 * 
 *   _      _  _       _   _  _   _   _
 *  | |  |  _| _| |_| |_  |_   | |_| |_| _
 *  |_|  | |_  _|   |  _| |_|  | |_|  _|   _   .
 *   _       _       _   _   _                     _           _   _
 *  |_| |_  |    _| |_  |_  |   |_| |    | |_| |  | |  _   _  |_| |_|  _
 *  | | |_| |_  |_| |_  |   |_| | | |   _| |_  |_ | | | | |_| |     | |
 *   _                          _
 *  |_  |_ | |     |_| | | |_|  _|
 *   _| |_ |_| |_| |_| | |  _| |_
 *
 */
 /*****************************************************************************/


uint8_t test[] = {0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0xFF};

uint8_t kern(uint8_t x) {
    x = (x & 0x40) | ((x & 0x0E) << 1) | ((x & 1) << 7) | ((x & 16) >> 3)
        | ((x & 32) >> 5) | ((x & 128) >> 2);
    return x;
}
 
int main() {
    int i, j;
    char t;
    for (i = 0; i < 10; ++i) {
        t = test[i];
        printf("0x%.2hhX, ", kern(t));
    }
    printf("\n\n");
    
    for (i = 0; i < 256;) {
        for (j = 0; j < 16; ++i, ++j) {
            t = _segMap[i];
            printf("0x%.2hhX, ", kern(t));
        }
        printf("\n");
    }
}